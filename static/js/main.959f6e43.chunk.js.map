{"version":3,"sources":["components/TriangulationBox/TriangulationBox.tsx","components/ControlPanel/ControlPanel.tsx","index.tsx"],"names":["TriangulationBox","props","canvasBox","useRef","vertices","triangles","geometry","Geometry","forEach","item","push","Vector3","faces","Face3","computeFaceNormals","material","MeshPhongMaterial","color","box","Mesh","light","DirectionalLight","position","set","scene","Scene","add","camera","PerspectiveCamera","z","useEffect","current","control","OrbitControls","renderer","WebGLRenderer","alpha","canvas","antialias","setSize","clientWidth","clientHeight","setAnimationLoop","rotation","x","y","render","dispose","className","ref","ControlPanel","width","height","dept","useState","boxGeometryState","setBoxGeometryState","type","defaultValue","onClick","get","value","fetch","then","res","json","data","ReactDOM","StrictMode","document","querySelector"],"mappings":"qQAoEeA,MArDf,SAA0BC,GACxB,IAAMC,EAAYC,iBAA0B,MACrCC,EAAuBH,EAAvBG,SAAUC,EAAaJ,EAAbI,UAEXC,EAAW,IAAIC,IACrBH,EAASI,SAAQ,SAACC,GAChBH,EAASF,SAASM,KAAlB,YAA2BC,IAA3B,YAAsCF,QAExCJ,EAAUG,SAAQ,SAACC,GACjBH,EAASM,MAAMF,KAAK,IAAIG,IAAMJ,EAAK,GAAIA,EAAK,GAAIA,EAAK,KACrDH,EAASM,MAAMF,KAAK,IAAIG,IAAMJ,EAAK,GAAIA,EAAK,GAAIA,EAAK,QAEvDH,EAASQ,qBAET,IAAMC,EAAW,IAAIC,IAAkB,CAACC,MAAO,QACzCC,EAAM,IAAIC,IAAKb,EAAUS,GAEzBK,EAAQ,IAAIC,IAAiB,SAAU,GAC7CD,EAAME,SAASC,KAAK,GAAI,EAAG,IAE3B,IAAMC,EAAQ,IAAIC,IAClBD,EAAME,IAAIR,GACVM,EAAME,IAAIN,GAEV,IAAMO,EAAS,IAAIC,IAAkB,GAAI,EAAG,GAAK,KAuBjD,OAtBAD,EAAOL,SAASO,EAAI,IAEpBC,qBAAU,WACR,GAA0B,OAAtB5B,EAAU6B,QAAkB,CAC9B,IAAMC,EAAU,IAAIC,IAAcN,EAAQzB,EAAU6B,SAQ9CG,EAAW,IAAIC,IAAc,CAACC,OAAO,EAAMC,OAAQnC,EAAU6B,QAASO,WAAW,IAIvF,OAHAJ,EAASK,QAAQrC,EAAU6B,QAAQS,YAAatC,EAAU6B,QAAQU,cAClEP,EAASQ,kBARO,WACdxB,EAAIyB,SAASC,GAAK,IAClB1B,EAAIyB,SAASE,GAAK,IAClBX,EAASY,OAAOtB,EAAOG,MAOlB,WACLK,EAAQe,eAMZ,wBAAQC,UAAU,oBAAoBC,IAAK/C,KCchCgD,G,MAzEM,WACnB,IAOMC,EAAQhD,iBAAyB,MACjCiD,EAASjD,iBAAyB,MAClCkD,EAAOlD,iBAAyB,MAVb,EAYuBmD,mBAXlB,CAC5BV,EAAG,EACHC,EAAG,EACHhB,EAAG,EACHzB,SAAU,GACVC,UAAW,KANY,mBAYlBkD,EAZkB,KAYAC,EAZA,KAyBzB,OACE,uBAAMR,UAAU,UAAhB,UACE,qBAAKA,UAAU,mBAAf,SACE,cAAC,EAAD,eAAsBO,MAExB,2BAAUP,UAAU,iBAApB,UACE,mDAGA,wBAAOA,UAAU,sBAAjB,UACE,uBACEA,UAAU,qBACVS,KAAK,SACLR,IAAKE,EACLO,aAAc,MALlB,WASA,wBAAOV,UAAU,sBAAjB,UACE,uBACEA,UAAU,qBACVS,KAAK,SACLR,IAAKG,EACLM,aAAc,MALlB,YASA,wBAAOV,UAAU,sBAAjB,UACE,uBACEA,UAAU,sBACVS,KAAK,SACLR,IAAKI,EACLK,aAAc,MALlB,UASA,wBACEV,UAAU,wBACVS,KAAK,SACLE,QAhDa,WACnB,GAAsB,OAAlBR,EAAMpB,SAAuC,OAAnBqB,EAAOrB,SAAqC,OAAjBsB,EAAKtB,QAAkB,CAC9E,IAAM6B,EAAG,iBAAaT,EAAMpB,QAAQ8B,MAA3B,mBAA2CT,EAAOrB,QAAQ8B,MAA1D,iBAAwER,EAAKtB,QAAQ8B,OAC9FC,MALQ,mDAKIF,GACTG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAG,GAAI,OAAIV,EAAoBU,QAwClC,gC,MC5DRC,IAASrB,OACP,cAAC,IAAMsB,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,cAAc,gB","file":"static/js/main.959f6e43.chunk.js","sourcesContent":["import React, {useEffect, useRef} from 'react';\r\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\r\nimport {\r\n  Geometry,\r\n  Vector3,\r\n  Face3,\r\n  MeshPhongMaterial,\r\n  Mesh,\r\n  DirectionalLight,\r\n  Scene,\r\n  WebGLRenderer,\r\n  PerspectiveCamera,\r\n} from 'three';\r\nimport './styles.sass';\r\n\r\nfunction TriangulationBox(props: TBoxGeometry) {\r\n  const canvasBox = useRef<HTMLCanvasElement>(null);\r\n  const {vertices, triangles} = props;\r\n\r\n  const geometry = new Geometry();\r\n  vertices.forEach((item: number[]) => {\r\n    geometry.vertices.push(new Vector3(...item));\r\n  });\r\n  triangles.forEach((item: number[]) => {\r\n    geometry.faces.push(new Face3(item[0], item[1], item[2]));\r\n    geometry.faces.push(new Face3(item[3], item[4], item[5]));\r\n  });\r\n  geometry.computeFaceNormals();\r\n\r\n  const material = new MeshPhongMaterial({color: 0x00ff00});\r\n  const box = new Mesh(geometry, material);\r\n\r\n  const light = new DirectionalLight(0xffffff, 1);\r\n  light.position.set(-1, -1, 20);\r\n\r\n  const scene = new Scene();\r\n  scene.add(box);\r\n  scene.add(light);\r\n\r\n  const camera = new PerspectiveCamera(60, 1, 0.1, 1000);\r\n  camera.position.z = 420;\r\n\r\n  useEffect(() => {\r\n    if (canvasBox.current !== null) {\r\n      const control = new OrbitControls(camera, canvasBox.current);\r\n\r\n      const animate = () => {\r\n        box.rotation.x += 0.01;\r\n        box.rotation.y += 0.01;\r\n        renderer.render(scene, camera);\r\n      };\r\n\r\n      const renderer = new WebGLRenderer({alpha: true, canvas: canvasBox.current, antialias: true});\r\n      renderer.setSize(canvasBox.current.clientWidth, canvasBox.current.clientHeight);\r\n      renderer.setAnimationLoop(animate);\r\n\r\n      return () => {\r\n        control.dispose();\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <canvas className=\"triangulation-box\" ref={canvasBox}>\r\n    </canvas>\r\n  );\r\n}\r\n\r\nexport default TriangulationBox;\r\n","import React, {useRef, useState} from 'react';\r\nimport TriangulationBox from '../TriangulationBox/TriangulationBox';\r\nimport './styles.sass';\r\n\r\nconst ControlPanel = () => {\r\n  const initBox: TBoxGeometry = {\r\n    x: 0,\r\n    y: 0,\r\n    z: 0,\r\n    vertices: [],\r\n    triangles: [],\r\n  }\r\n  const width = useRef<HTMLInputElement>(null);\r\n  const height = useRef<HTMLInputElement>(null);\r\n  const dept = useRef<HTMLInputElement>(null);\r\n\r\n  const [boxGeometryState, setBoxGeometryState] = useState(initBox);\r\n\r\n  const url = 'https://apishare.herokuapp.com/triangulation_box';\r\n\r\n  const getBoxValues = () => {\r\n    if (width.current !== null && height.current !== null && dept.current !== null) {\r\n      const get = `?width=${width.current.value}&height=${height.current.value}&dept=${dept.current.value}`;\r\n      fetch(url + get)\r\n        .then(res => res.json())\r\n        .then(data => setBoxGeometryState(data));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"control\">\r\n      <div className=\"control__element\">\r\n        <TriangulationBox {...boxGeometryState}/>\r\n      </div>\r\n      <fieldset className=\"control__panel\">\r\n        <legend>\r\n          Control Panel\r\n        </legend>\r\n        <label className=\"control__panel-item\">\r\n          <input\r\n            className=\"control__min-value\"\r\n            type=\"number\"\r\n            ref={width}\r\n            defaultValue={200}\r\n          />\r\n          Width\r\n        </label>\r\n        <label className=\"control__panel-item\">\r\n          <input\r\n            className=\"control__max-value\"\r\n            type=\"number\"\r\n            ref={height}\r\n            defaultValue={200}\r\n          />\r\n          Height\r\n        </label>\r\n        <label className=\"control__panel-item\">\r\n          <input\r\n            className=\"control__value-from\"\r\n            type=\"number\"\r\n            ref={dept}\r\n            defaultValue={200}\r\n          />\r\n          Dept\r\n        </label>\r\n        <button\r\n          className=\"control__panel-button\"\r\n          type=\"button\"\r\n          onClick={getBoxValues}\r\n        >\r\n          Create Box\r\n        </button>\r\n      </fieldset>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ControlPanel;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ControlPanel from './components/ControlPanel/ControlPanel';\nimport './index.sass';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ControlPanel/>\n  </React.StrictMode>,\n  document.querySelector('.app-main')\n);\n"],"sourceRoot":""}